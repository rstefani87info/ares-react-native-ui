import LinearGradient from 'react-native-linear-gradient';

export const white = [255, 255, 255];
export const black = [0, 0, 0];
export const aliceblue = [240, 248, 255];
export const antiquewhite = [250, 235, 215];
export const aqua = [0, 255, 255];
export const aquamarine = [127, 255, 212];
export const azure = [240, 255, 255];
export const beige = [245, 245, 220];
export const bisque = [255, 228, 196];
export const blanchedalmond = [255, 235, 205];
export const blue = [0, 0, 255];
export const blueviolet = [138, 43, 226];
export const brown = [165, 42, 42];
export const burlywood = [222, 184, 135];
export const cadetblue = [95, 158, 160];
export const chartreuse = [127, 255, 0];
export const chocolate = [210, 105, 30];
export const coral = [255, 127, 80];
export const cornflowerblue = [100, 149, 237];
export const cornsilk = [255, 248, 220];
export const crimson = [220, 20, 60];
export const cyan = [0, 255, 255];
export const darkblue = [0, 0, 139];
export const darkcyan = [0, 139, 139];
export const darkgoldenrod = [184, 134, 11];
export const darkgray = [169, 169, 169];
export const darkgreen = [0, 100, 0];
export const darkgrey = [169, 169, 169];
export const darkkhaki = [189, 183, 107];
export const darkmagenta = [139, 0, 139];
export const darkolivegreen = [85, 107, 47];
export const darkorange = [255, 140, 0];
export const darkorchid = [153, 50, 204];
export const darkred = [139, 0, 0];
export const darksalmon = [233, 150, 122];
export const darkseagreen = [143, 188, 143];
export const darkslateblue = [72, 61, 139];
export const darkslategray = [47, 79, 79];
export const darkslategrey = [47, 79, 79];
export const darkturquoise = [0, 206, 209];
export const darkviolet = [148, 0, 211];
export const deeppink = [255, 20, 147];
export const deepskyblue = [0, 191, 255];
export const dimgray = [105, 105, 105];
export const dimgrey = [105, 105, 105];
export const dodgerblue = [30, 144, 255];
export const firebrick = [178, 34, 34];
export const floralwhite = [255, 250, 240];
export const forestgreen = [34, 139, 34];
export const fuchsia = [255, 0, 255];
export const gainsboro = [220, 220, 220];
export const ghostwhite = [248, 248, 255];
export const gold = [255, 215, 0];
export const goldenrod = [218, 165, 32];
export const gray = [128, 128, 128];
export const green = [0, 128, 0];
export const greenyellow = [173, 255, 47];
export const grey = [128, 128, 128];
export const honeydew = [240, 255, 240];
export const hotpink = [255, 105, 180];
export const indianred = [205, 92, 92];
export const indigo = [75, 0, 130];
export const ivory = [255, 255, 240];
export const khaki = [240, 230, 140];
export const lavender = [230, 230, 250];
export const lavenderblush = [255, 240, 245];
export const lawngreen = [124, 252, 0];
export const lemonchiffon = [255, 250, 205];
export const lightblue = [173, 216, 230];
export const lightcoral = [240, 128, 128];
export const lightcyan = [224, 255, 255];
export const lightgoldenrodyellow = [250, 250, 210];
export const lightgray = [211, 211, 211];
export const lightgreen = [144, 238, 144];
export const lightgrey = [211, 211, 211];
export const lightpink = [255, 182, 193];
export const lightsalmon = [255, 160, 122];
export const lightseagreen = [32, 178, 170];
export const lightskyblue = [135, 206, 250];
export const lightslategray = [119, 136, 153];
export const lightslategrey = [119, 136, 153];
export const lightsteelblue = [176, 196, 222];
export const lightyellow = [255, 255, 224];
export const lime = [0, 255, 0];
export const limegreen = [50, 205, 50];
export const linen = [250, 240, 230];
export const magenta = [255, 0, 255];
export const maroon = [128, 0, 0];
export const mediumaquamarine = [102, 205, 170];
export const mediumblue = [0, 0, 205];
export const mediumorchid = [186, 85, 211];
export const mediumpurple = [147, 112, 219];
export const mediumseagreen = [60, 179, 113];
export const mediumslateblue = [123, 104, 238];
export const mediumspringgreen = [0, 250, 154];
export const mediumturquoise = [72, 209, 204];
export const mediumvioletred = [199, 21, 133];
export const midnightblue = [25, 25, 112];
export const mintcream = [245, 255, 250];
export const mistyrose = [255, 228, 225];
export const moccasin = [255, 228, 181];
export const navajowhite = [255, 222, 173];
export const navy = [0, 0, 128];
export const oldlace = [253, 245, 230];
export const olive = [128, 128, 0];
export const olivedrab = [107, 142, 35];
export const orange = [255, 165, 0];
export const orangered = [255, 69, 0];
export const orchid = [218, 112, 214];
export const palegoldenrod = [238, 232, 170];
export const palegreen = [152, 251, 152];
export const paleturquoise = [175, 238, 238];
export const palevioletred = [219, 112, 147];
export const papayawhip = [255, 239, 213];
export const peachpuff = [255, 218, 185];
export const peru = [205, 133, 63];
export const pink = [255, 192, 203];
export const plum = [221, 160, 221];
export const powderblue = [176, 224, 230];
export const purple = [128, 0, 128];
export const rebeccapurple = [102, 51, 153];
export const red = [255, 0, 0];
export const rosybrown = [188, 143, 143];
export const royalblue = [65, 105, 225];
export const saddlebrown = [139, 69, 19];
export const salmon = [250, 128, 114];
export const sandybrown = [244, 164, 96];
export const seagreen = [46, 139, 87];
export const seashell = [255, 245, 238];
export const sienna = [160, 82, 45];
export const silver = [192, 192, 192];
export const skyblue = [135, 206, 235];
export const slateblue = [106, 90, 205];
export const slategray = [112, 128, 144];
export const slategrey = [112, 128, 144];
export const snow = [255, 250, 250];
export const springgreen = [0, 255, 127];
export const steelblue = [70, 130, 180];
export const tan = [210, 180, 140];
export const teal = [0, 128, 128];
export const thistle = [216, 191, 216];
export const tomato = [255, 99, 71];
export const turquoise = [64, 224, 208];
export const violet = [238, 130, 238];
export const wheat = [245, 222, 179];
export const whitesmoke = [245, 245, 245];
export const yellow = [255, 255, 0];
export const yellowgreen = [154, 205, 50];

export function getColor(color, step, brightness) {
  color = asRGBColor(color);
  return color.setBrightness(step, brightness);
}
 
export const arrays = {
  aliceblue ,
  antiquewhite ,
  aqua ,
  aquamarine ,
  azure ,
  beige ,
  bisque ,
  blanchedalmond ,
  blue ,
  blueviolet ,
  brown ,
  burlywood ,
  cadetblue ,
  chartreuse ,
  chocolate ,
  coral ,
  cornflowerblue ,
  cornsilk ,
  crimson ,
  cyan ,
  darkblue ,
  darkcyan ,
  darkgoldenrod ,
  darkgray ,
  darkgreen ,
  darkgrey ,
  darkkhaki ,
  darkmagenta ,
  darkolivegreen ,
  darkorange ,
  darkorchid ,
  darkred ,
  darksalmon ,
  darkseagreen ,
  darkslateblue ,
  darkslategray ,
  darkslategrey ,
  darkturquoise ,
  darkviolet ,
  deeppink ,
  deepskyblue ,
  dimgray ,
  dimgrey ,
  dodgerblue ,
  firebrick ,
  floralwhite ,
  forestgreen ,
  fuchsia ,
  gainsboro ,
  ghostwhite ,
  gold ,
  goldenrod ,
  gray ,
  green ,
  greenyellow ,
  grey ,
  honeydew ,
  hotpink ,
  indianred ,
  indigo ,
  ivory ,
  khaki ,
  lavender ,
  lavenderblush ,
  lawngreen ,
  lemonchiffon ,
  lightblue ,
  lightcoral ,
  lightcyan ,
  lightgoldenrodyellow ,
  lightgray ,
  lightgreen ,
  lightgrey ,
  lightpink ,
  lightsalmon ,
  lightseagreen ,
  lightskyblue ,
  lightslategray ,
  lightslategrey ,
  lightsteelblue ,
  lightyellow ,
  lime ,
  limegreen ,
  linen ,
  magenta ,
  maroon ,
  mediumaquamarine ,
  mediumblue ,
  mediumorchid ,
  mediumpurple ,
  mediumseagreen ,
  mediumslateblue ,
  mediumspringgreen ,
  mediumturquoise ,
  mediumvioletred ,
  midnightblue ,
  mintcream ,
  mistyrose ,
  moccasin ,
  navajowhite ,
  navy ,
  oldlace ,
  olive ,
  olivedrab ,
  orange ,
  orangered ,
  orchid ,
  palegoldenrod ,
  palegreen ,
  paleturquoise ,
  palevioletred ,
  papayawhip ,
  peachpuff ,
  peru ,
  pink ,
  plum ,
  powderblue ,
  purple ,
  rebeccapurple ,
  red ,
  rosybrown ,
  royalblue ,
  saddlebrown ,
  salmon ,
  sandybrown ,
  seagreen ,
  seashell ,
  sienna ,
  silver ,
  skyblue ,
  slateblue ,
  slategray ,
  slategrey ,
  snow ,
  springgreen ,
  steelblue ,
  tan ,
  teal ,
  thistle ,
  tomato ,
  turquoise ,
  violet ,
  wheat ,
  whitesmoke ,
  yellow ,
  yellowgreen,
};
export const instances = {};
export const shades = {};

export function convertRGBAToCSSColor(r, g, b, a = 1) {
  return `rgba(${r}, ${g}, ${b}, ${a})`;
}

/**
 * @prototype {array} toCSS
 */
export function convertRGBAArrayToCSS(this_rgbaArray) {
  return convertRGBAToCSSColor(...this_rgbaArray);
}

export function getShade(color, step = 55) {
  const realColor = getColor(color, step);
  if(shades[realColor.name]) return {...shades[realColor.name]};
  const shade = {
    white:getColor("white"),
    lightest : realColor.getLighter( step * 3),
    lighter : realColor.getLighter( step * 2),
    light : realColor.getLighter(step),
    middle : realColor,
    dark : realColor.getDarker(step),
    darker : realColor.getDarker( step * 2),
    darkest : realColor.getDarker( step * 3),
    black:getColor("black"),
    toCSSGradient: function(direction,percentages=[0,-1,-1,-1,-1,50,-1,-1,-1,100]) {  
      const shadeColors = [
        "black",
        "darkest",
        "darker",
        "dark",
        "middle",
        "light",
        "lighter",
        "lightest",
        "white",
      ];
      let newArray = new Array(101);
      if(Array.isArray(percentages)) {
        percentages.forEach((percentage, index) => {
          if( 0 <= percentage) {newArray[percentage]=`${shadeColors[index].convertRGBAToCSSColor()} ${percentage}%`;}
        })
      }else if(typeof percentages === "object") {
        Object.keys(percentages).forEach((key, index) => {
          newArray[percentages[key]] = `${shadeColors[index].convertRGBAToCSSColor()} ${percentages[key]}%`;
        });
      }
      return `linear-gradient(${direction}, ${newArray.filter(x => x).join(", ")})`;
    },
    toReactNativeGradientComponent: function(direction,style,percentages=[0,-1,-1,-1,-1,50,-1,-1,-1,100],content, ...props) {
      const shadeColors = [
        "black",
        "darkest",
        "darker",
        "dark",
        "middle",
        "light",
        "lighter",
        "lightest",
        "white",
      ];
      let newArray = new Array(101);
      if(Array.isArray(percentages)) {
        percentages.forEach((percentage, index) => {
          if( 0 <= percentage) {newArray[percentage]=shadeColors[index].toString();}
        })
      }else if(typeof percentages === "object") {
        Object.keys(percentages).forEach((key, index) => {
          newArray[percentages[key]] = shadeColors[index].toString();
        });
      }
      return (
        <LinearGradient
          colors={newArray.filter(x => x)}
          locations={newArray.map((x, index) => index ).filter(x => newArray[x]).map(x => x / 100)} 
          start={direction.start}
          end={direction.end}
          style={getStyle(style,"wrapper")} //style ??{ flex: 1 }}
          {...props}
        >
          {{content}}
        </LinearGradient>
      );
    }
  };
  if(realColor.name)shades[realColor.name] = shade;
  return shade;
}
 

export function convertToHexShade(rgbShade) {
  return {
    white: convertRGBToHex(...white),
    lightest : convertRGBToHex(...rgbShade.lightest),
    lighter : convertRGBToHex(...rgbShade.lighter),
    light : convertRGBToHex(...rgbShade.light),
    middle : convertRGBToHex(...rgbShade.middle),
    dark : convertRGBToHex(...rgbShade.dark),
    darker : convertRGBToHex(...rgbShade.darker),
    darkest : convertRGBToHex(...rgbShade.darkest),
    black: convertRGBToHex(...black),
  };
}

export function addAlphaToRGB(r, g, b, opacity) {
    if(opacity < 0) {opacity = 0;}
    if(opacity > 1) {opacity = 1 / opacity;}
  return [r, g, b, opacity];
}

export function addAlphaToHex(color, opacity) {
  return convertRGBToHex(...addAlphaToRGB(...convertHexToRGB(color), opacity));
}

export function convertHexToRGB(hex) {
  const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2}){0,1}$/i.exec(hex);
  return result
    ? {
        r: parseInt(result[1], 16),
        g: parseInt(result[2], 16),
        b: parseInt(result[3], 16),
        a: result.length === 5 ? 255 / parseInt(result[4], 16) : 1,
      }
    : null;
}

export function convertRGBToHex(r, g, b, a = 1) {
  return '#' + [r, g, b].map(x => {
    const hex = x.toString(16);
    return hex.length === 1 ? '0' + hex : hex;
  }).join('');
}

export function realColor.getLighter( step = 55, iterations = 1) {
  if (step < 0) {step = step * -1;}
  const rgb = [r, g, b];
  return [
    r === 255 || r + step >= 255 ? 255 : r + step,
    g === 255 || g + step >= 255 ? 255 : g + step,
    b === 255 || b + step >= 255 ? 255 : b + step,
  ];
}

export function getHexLighter(color, step = '37' /* 55d = 37h */) {
  const rgb = getRGBLighter(...Object.values(convertHexToRGB(color)), parseInt(step, 16));
  const stack = new Error().stack;
  const caller = stack.split('\n')[2].trim(); 
  return convertRGBToHex(rgb);
}

export function getRGBDarker(r, g, b, step = 55) {
  if (step < 0) {step = step * -1;}
  const rgb = [r, g, b];
  return [
    r === 0 || r - step <= 0 ? 0 : r - step,
    g === 0 || g - step <= 0 ? 0 : g - step,
    b === 0 || b - step <= 0 ? 0 : b - step,
  ];
}

export function getHexDarker(color, step = '37' /* 55d = 37h */) {
  const rgb = getRGBDarker(...Object.values(convertHexToRGB(color)), parseInt(step, 16));
  return convertRGBToHex(rgb);
} 

export const transparent = {
  transparent: 'transparent',
};

export function parseRGBA(this_string) {
  if(!this_string) {return null;}
  this_string = this_string.toLowerCase().replace("_", '');
  if(instances[this_string])
    color = instances[this_string];
  else if(arrays[this_string]) {
    color = getColor(arrays[this_string]);
    color.name=this_string;
    instances[this_string] = color;
  } else {
    const matches = /(\d+),(\d+),(\d+)(,\d+)/i.exec(this_string);
    let color =( matches
      ? {
          r: parseInt(matches[1], 10),
          g: parseInt(matches[2], 10),
          b: parseInt(matches[3], 10),
          a: matches[4] ? parseFloat(matches[4]) : 1,
        }
      : convertHexToRGB(color))  ;
    if(color){
      color.toString = () => convertRGBAToCSSColor(color.r, color.g, color.b, color.a);
      color.toHex = () => convertRGBToHex(color.r, color.g, color.b, color.a);
      color.getLighter = (step = 55) => getColor(getRGBLighter(color.r, color.g, color.b, step));
      color.getDarker = (step = 55) => getColor(getRGBDarker(color.r, color.g, color.b, step));
      color.getShade = (step = 55) => getShade(this, step);
      color.equals = (c) => c.r === color.r && c.g === color.g && c.b === color.b && c.a === color.a;
      color.setBrightness = (step, brightness=0) => {
        if(!brightness) {
          return this;
        } else if(brightness>0) {
          return this.getLighter(step*brightness);
        }else{
          return this.getDarker(step*brightness*-1);
        }
      };
    }
  }
  return color;
}

export function asRGBColor(color) {
  if (typeof color === 'string') {
    color = parseRGBA(color);
  }
  else if (typeof color === 'array') {
    [r,g,b,a]=color;
    color = parseRGBA(`${r??0}, ${g??0}, ${b??0}, ${a??0}`);
  }
  else if (typeof color === 'object') {
    const {r,g,b,a} = color;
    color = parseRGBA(`${r??0}, ${g??0}, ${b??0}, ${a??0}`);
  }
  return color;
   
}


